<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>spPlate &mdash; desidatamodel 23.1.dev1022 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/desidatamodel.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="badModel" href="badModel.html" />
    <link rel="prev" title="sdR" href="sdR.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> desidatamodel
          </a>
              <div class="version">
                23.1.dev1022
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../DESI_ROOT/index.html">$DESI_ROOT : represents the top level of the DESI directory tree.</a></li>
<li class="toctree-l1"><a class="reference internal" href="../DESI_SPECTRO_DATA/index.html">$DESI_SPECTRO_DATA : raw data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../DESI_SPECTRO_REDUX/index.html">$DESI_SPECTRO_REDUX : processed spectro data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../DESI_SPECTRO_SIM/index.html">$DESI_SPECTRO_SIM : simulated spectro data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../DESI_SPECTRO_CALIB/index.html">$DESI_SPECTRO_CALIB : spectro calibration data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../DESI_SURVEYOPS/index.html">$DESI_SURVEYOPS : data files used for day-to-day survey operations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../DESI_TARGET/index.html">$DESI_TARGET : target selection and fiber assignment (see also Myers *et al.* 2023)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../DESIMODEL/index.html">$DESIMODEL : data used for simulating DESI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../DESISURVEY_OUTPUT/index.html">$DESISURVEY_OUTPUT : outputs from desisurvey and surveysim</a></li>
<li class="toctree-l1"><a class="reference internal" href="../PROTODESI/index.html">$PROTODESI : data and logs from the ProtoDESI campaign</a></li>
<li class="toctree-l1"><a class="reference internal" href="../DESI_LSS_EDA/index.html">$DESI_LSS_EDA: LSS archival data files for public releases</a></li>
<li class="toctree-l1"><a class="reference internal" href="../bitmasks.html">Bit Masks in DESI</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../datamodel.html">Contributing to desidatamodel</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../datamodel.html#introduction">Introduction</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../datamodel.html#examples-and-other-documents">Examples and Other Documents</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="index.html">examples</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="sdR.html">sdR</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">spPlate</a></li>
<li class="toctree-l4"><a class="reference internal" href="badModel.html">badModel</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../datamodel.html#directory-tree">Directory Tree</a></li>
<li class="toctree-l2"><a class="reference internal" href="../datamodel.html#code-setup">Code setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="../datamodel.html#building-the-documents">Building the Documents</a></li>
<li class="toctree-l2"><a class="reference internal" href="../datamodel.html#code-tests">Code Tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="../datamodel.html#units">Units</a></li>
<li class="toctree-l2"><a class="reference internal" href="../datamodel.html#tips-and-tests">Tips and Tests</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../api.html">desidatamodel API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changes.html">desidatamodel Change Log</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">desidatamodel</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../datamodel.html">Contributing to desidatamodel</a> &raquo;</li>
          <li><a href="index.html">examples</a> &raquo;</li>
      <li>spPlate</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/examples/spPlate.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="spplate">
<h1>spPlate<a class="headerlink" href="#spplate" title="Permalink to this headline">¶</a></h1>
<dl class="field-list simple">
<dt class="field-odd">Summary</dt>
<dd class="field-odd"><p>Combined spectra for one plate.
The spPlate files contain the combined spectra for all exposures of
a given plate.  There are typically four 900s exposures which may
have been taken in a single night, or over multiple nights.  This page
is an updated summary of the <a class="reference external" href="http://spectro.astro.princeton.edu/#dm_spplate">SDSS2 spPlate data model</a> .</p>
</dd>
<dt class="field-even">Naming Convention</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">spPlate-PLATE4-MJD5.fits</span></code>, where <code class="docutils literal notranslate"><span class="pre">PLATE4</span></code> is the
zero-padded, four-digit plate number and <code class="docutils literal notranslate"><span class="pre">MJD5</span></code> is the five-digit MJD.</p>
</dd>
<dt class="field-odd">Regex</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">spPlate-[0-9]{4}-[0-9]{5}\.fits</span></code></p>
</dd>
</dl>
<section id="contents">
<h2>Contents<a class="headerlink" href="#contents" title="Permalink to this headline">¶</a></h2>
<table class="docutils align-default">
<colgroup>
<col style="width: 8%" />
<col style="width: 11%" />
<col style="width: 11%" />
<col style="width: 69%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Number</p></th>
<th class="head"><p>EXTNAME</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Contents</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><a class="reference internal" href="#hdu0">HDU0</a></p></td>
<td><p>FLUX</p></td>
<td><p>IMAGE</p></td>
<td><p>Flux in units of 10<sup>-17</sup> erg/s/cm<sup>2</sup>/Å.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#hdu1">HDU1</a></p></td>
<td><p>IVAR</p></td>
<td><p>IMAGE</p></td>
<td><p>Inverse variance (<span class="math notranslate nohighlight">\(1/\sigma^2\)</span>) for HDU 0</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#hdu2">HDU2</a></p></td>
<td><p>ANDMASK</p></td>
<td><p>IMAGE</p></td>
<td><p>AND mask</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#hdu3">HDU3</a></p></td>
<td><p>ORMASK</p></td>
<td><p>IMAGE</p></td>
<td><p>OR mask</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#hdu4">HDU4</a></p></td>
<td><p>WAVEDISP</p></td>
<td><p>IMAGE</p></td>
<td><p>Wavelength dispersion in pixels</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#hdu5">HDU5</a></p></td>
<td><p>PLUGMAP</p></td>
<td><p>BINTABLE</p></td>
<td><p>Plug-map structure from plPlugMapM file</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#hdu6">HDU6</a></p></td>
<td><p>SKY</p></td>
<td><p>IMAGE</p></td>
<td><p>Average sky flux in units of 10<sup>-17</sup> erg/s/cm<sup>2</sup>/Å.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="fits-header-units">
<h2>FITS Header Units<a class="headerlink" href="#fits-header-units" title="Permalink to this headline">¶</a></h2>
<section id="hdu0">
<h3>HDU0<a class="headerlink" href="#hdu0" title="Permalink to this headline">¶</a></h3>
<p>EXTNAME = FLUX</p>
<p>Data: FITS image [float64]</p>
</section>
<section id="hdu1">
<h3>HDU1<a class="headerlink" href="#hdu1" title="Permalink to this headline">¶</a></h3>
<p>EXTNAME = IVAR</p>
<p>Data: FITS image [float64]</p>
</section>
<section id="hdu2">
<h3>HDU2<a class="headerlink" href="#hdu2" title="Permalink to this headline">¶</a></h3>
<p>EXTNAME = ANDMASK</p>
<p>Data: FITS image [int32]</p>
</section>
<section id="hdu3">
<h3>HDU3<a class="headerlink" href="#hdu3" title="Permalink to this headline">¶</a></h3>
<p>EXTNAME = ORMASK</p>
<p>Data: FITS image [int32]</p>
</section>
<section id="hdu4">
<h3>HDU4<a class="headerlink" href="#hdu4" title="Permalink to this headline">¶</a></h3>
<p>EXTNAME = WAVEDISP</p>
<p>Data: FITS image [float64]</p>
</section>
<section id="hdu5">
<span id="spplate-hdu5-plugmap"></span><h3>HDU5<a class="headerlink" href="#hdu5" title="Permalink to this headline">¶</a></h3>
<p>EXTNAME = PLUGMAP</p>
<section id="required-header-keywords">
<h4>Required Header Keywords<a class="headerlink" href="#required-header-keywords" title="Permalink to this headline">¶</a></h4>
<table class="docutils align-default">
<colgroup>
<col style="width: 13%" />
<col style="width: 15%" />
<col style="width: 7%" />
<col style="width: 66%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Header</p></th>
<th class="head"><p>Value</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Comment</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>XTENSION</p></td>
<td><p>BINTABLE</p></td>
<td><p>str</p></td>
<td><p>Binary table written by MWRFITS v1.8</p></td>
</tr>
<tr class="row-odd"><td><p>BITPIX</p></td>
<td><p>8</p></td>
<td><p>int</p></td>
<td><p>Required value</p></td>
</tr>
<tr class="row-even"><td><p>NAXIS</p></td>
<td><p>2</p></td>
<td><p>int</p></td>
<td><p>Required value</p></td>
</tr>
<tr class="row-odd"><td><p>NAXIS1</p></td>
<td><p>250</p></td>
<td><p>int</p></td>
<td><p>Number of bytes per row</p></td>
</tr>
<tr class="row-even"><td><p>NAXIS2</p></td>
<td><p>NFIBER</p></td>
<td><p>int</p></td>
<td><p>Number of rows</p></td>
</tr>
<tr class="row-odd"><td><p>PCOUNT</p></td>
<td><p>0</p></td>
<td><p>int</p></td>
<td><p>Normally 0 (no varying arrays)</p></td>
</tr>
<tr class="row-even"><td><p>GCOUNT</p></td>
<td><p>1</p></td>
<td><p>int</p></td>
<td><p>Required value</p></td>
</tr>
<tr class="row-odd"><td><p>TFIELDS</p></td>
<td><p>34</p></td>
<td><p>int</p></td>
<td><p>Number of columns in table</p></td>
</tr>
</tbody>
</table>
</section>
<section id="required-data-table-columns">
<h4>Required Data Table Columns<a class="headerlink" href="#required-data-table-columns" title="Permalink to this headline">¶</a></h4>
<table class="docutils align-default">
<colgroup>
<col style="width: 53%" />
<col style="width: 25%" />
<col style="width: 22%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Column</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Comment</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>OBJID</p></td>
<td><p>int32[5]</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>HOLETYPE</p></td>
<td><p>char[6]</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>RA</p></td>
<td><p>double</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>DEC</p></td>
<td><p>double</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>MAG</p></td>
<td><p>float[5]</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>STARL</p></td>
<td><p>float</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>EXPL</p></td>
<td><p>float</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>DEVAUCL</p></td>
<td><p>float</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>OBJTYPE</p></td>
<td><p>char[16]</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>XFOCAL</p></td>
<td><p>double</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>YFOCAL</p></td>
<td><p>double</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>SPECTROGRAPHID</p></td>
<td><p>int32</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>FIBERID</p></td>
<td><p>int32</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>THROUGHPUT</p></td>
<td><p>int32</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>PRIMTARGET</p></td>
<td><p>int32</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>SECTARGET</p></td>
<td><p>int32</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>OFFSETID</p></td>
<td><p>int32</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>SCI_EXPTIME</p></td>
<td><p>float</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>SOURCETYPE</p></td>
<td><p>char[7]</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>LAMBDA_EFF</p></td>
<td><p>float</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>ZOFFSET</p></td>
<td><p>float</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>BLUEFIBER</p></td>
<td><p>int32</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>BOSS_TARGET1</p></td>
<td><p>int64</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>BOSS_TARGET2</p></td>
<td><p>int64</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>ANCILLARY_TARGET1</p></td>
<td><p>int64</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>ANCILLARY_TARGET2</p></td>
<td><p>int64</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>RUN</p></td>
<td><p>int32</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>RERUN</p></td>
<td><p>char[5]</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>CAMCOL</p></td>
<td><p>int32</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>FIELD</p></td>
<td><p>int32</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>ID</p></td>
<td><p>int32</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>CALIBFLUX</p></td>
<td><p>float[5]</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>CALIBFLUX_IVAR</p></td>
<td><p>float[5]</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>SFD_EBV</p></td>
<td><p>float</p></td>
<td></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="hdu6">
<h3>HDU6<a class="headerlink" href="#hdu6" title="Permalink to this headline">¶</a></h3>
<p>EXTNAME = SKY</p>
<p>FITS Image: Average sky flux</p>
<section id="id1">
<h4>Required Header Keywords<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h4>
<table class="docutils align-default">
<colgroup>
<col style="width: 14%" />
<col style="width: 10%" />
<col style="width: 7%" />
<col style="width: 69%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Header</p></th>
<th class="head"><p>Value</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Comment</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>XTENSION</p></td>
<td><p>IMAGE</p></td>
<td><p>str</p></td>
<td><p>Image Extension created by MWRFITS v1.4a</p></td>
</tr>
<tr class="row-odd"><td><p>BITPIX</p></td>
<td><p>-32</p></td>
<td><p>int</p></td>
<td><p>Data is 32-bit float</p></td>
</tr>
<tr class="row-even"><td><p>NAXIS</p></td>
<td><p>2</p></td>
<td><p>int</p></td>
<td><p>Number of data axes</p></td>
</tr>
<tr class="row-odd"><td><p>NAXIS1</p></td>
<td><p>NPIX</p></td>
<td><p>int</p></td>
<td><p>Width</p></td>
</tr>
<tr class="row-even"><td><p>NAXIS2</p></td>
<td><p>NFIBER</p></td>
<td><p>int</p></td>
<td><p>Height</p></td>
</tr>
</tbody>
</table>
<p>Data: FITS image [float64]</p>
</section>
</section>
</section>
<section id="notes-and-examples">
<h2>Notes and Examples<a class="headerlink" href="#notes-and-examples" title="Permalink to this headline">¶</a></h2>
<p>Additional HDUs may be present for engineering purposes,
but are not supported and are subject to change.
Users should refrain from using HDUs not listed here.</p>
<p>There are two masks, an “AND” mask and an “OR” mask.
The spectra are constructed from 3 or more 15-minute observations,
and the “AND” mask bits are set if that bit is set for each and
every input observation. The “OR” mask bits are set if that bit
is set for any of the observations.
Usually, only “AND” mask is of interest.</p>
<p>The mask bits are set as follows.
The authoritative definition of mask bits is in
<a class="reference external" href="http://www.sdss3.org/svn/repo/idlutils/trunk/data/sdss/sdssMaskbits.par">idlutils/data/sdss/sdssMaskbits.par</a>, with an alternate parsing at the
<a class="reference external" href="http://www.sdss3.org/dr10/algorithms/bitmasks.php">data release documentation</a>.  They are included here for convenience:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 3%" />
<col style="width: 13%" />
<col style="width: 84%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Bit</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>0</p></td>
<td><p>NOPLUG</p></td>
<td><p>Fiber not listed in plugmap file</p></td>
</tr>
<tr class="row-odd"><td><p>1</p></td>
<td><p>BADTRACE</p></td>
<td><p>Bad trace from routine TRACE320CRUDE</p></td>
</tr>
<tr class="row-even"><td><p>2</p></td>
<td><p>BADFLAT</p></td>
<td><p>Low counts in fiberflat</p></td>
</tr>
<tr class="row-odd"><td><p>3</p></td>
<td><p>BADARC</p></td>
<td><p>Bad arc solution</p></td>
</tr>
<tr class="row-even"><td><p>4</p></td>
<td><p>MANYBADCOLUMNS</p></td>
<td><p>&gt;10% pixels are bad columns</p></td>
</tr>
<tr class="row-odd"><td><p>5</p></td>
<td><p>MANYREJECTED</p></td>
<td><p>&gt;10% pixels are rejected in extraction</p></td>
</tr>
<tr class="row-even"><td><p>6</p></td>
<td><p>LARGESHIFT</p></td>
<td><p>Large spatial shift between flat and object pos’n</p></td>
</tr>
<tr class="row-odd"><td><p>7</p></td>
<td><p>BADSKYFIBER</p></td>
<td><p>Sky Fiber shows extreme residuals</p></td>
</tr>
<tr class="row-even"><td><p>8</p></td>
<td><p>NEARWHOPPER</p></td>
<td><p>Within 2 fibers of a whopping fiber (deprecated)</p></td>
</tr>
<tr class="row-odd"><td><p>10</p></td>
<td><p>SMEARIMAGE</p></td>
<td><p>Smear available for red and blue cameras (deprecated)</p></td>
</tr>
<tr class="row-even"><td><p>11</p></td>
<td><p>SMEARHIGHSN</p></td>
<td><p>S/N sufficient for full smear fit (deprecated)</p></td>
</tr>
<tr class="row-odd"><td><p>12</p></td>
<td><p>SMEARMEDSN</p></td>
<td><p>S/N only sufficient for scaled median fit (deprecated)</p></td>
</tr>
<tr class="row-even"><td><p>16</p></td>
<td><p>NEARBADPIXEL</p></td>
<td><p>Bad pixel within 3 pixels of trace</p></td>
</tr>
<tr class="row-odd"><td><p>17</p></td>
<td><p>LOWFLAT</p></td>
<td><p>Flat field less than 0.5</p></td>
</tr>
<tr class="row-even"><td><p>18</p></td>
<td><p>FULLREJECT</p></td>
<td><p>Pixel fully rejected in extraction (INVVAR=0)</p></td>
</tr>
<tr class="row-odd"><td><p>19</p></td>
<td><p>PARTIALREJECT</p></td>
<td><p>Some pixels rejected in extraction</p></td>
</tr>
<tr class="row-even"><td><p>20</p></td>
<td><p>SCATTEREDLIGHT</p></td>
<td><p>Scattered light significant</p></td>
</tr>
<tr class="row-odd"><td><p>21</p></td>
<td><p>CROSSTALK</p></td>
<td><p>Cross-talk significant</p></td>
</tr>
<tr class="row-even"><td><p>22</p></td>
<td><p>NOSKY</p></td>
<td><p>Sky level unknown at this wavelength (INVVAR=0)</p></td>
</tr>
<tr class="row-odd"><td><p>23</p></td>
<td><p>BRIGHTSKY</p></td>
<td><p>Sky level &gt; flux + 10*(flux error) AND sky &gt; 2.0 * median(sky,99 pixels)</p></td>
</tr>
<tr class="row-even"><td><p>24</p></td>
<td><p>NODATA</p></td>
<td><p>No data available in combine B-spline (deprecated; INVVAR=0)</p></td>
</tr>
<tr class="row-odd"><td><p>25</p></td>
<td><p>COMBINEREJ</p></td>
<td><p>Rejected in combine B-spline</p></td>
</tr>
<tr class="row-even"><td><p>26</p></td>
<td><p>BADFLUXFACTOR</p></td>
<td><p>Low flux-calibration or flux-correction factor</p></td>
</tr>
<tr class="row-odd"><td><p>27</p></td>
<td><p>BADSKYCHI</p></td>
<td><p>Relative <span class="math notranslate nohighlight">\(\chi^2\)</span> &gt; 3 in sky residuals at this wavelength</p></td>
</tr>
<tr class="row-even"><td><p>28</p></td>
<td><p>REDMONSTER</p></td>
<td><p>Contiguous region of bad <span class="math notranslate nohighlight">\(\chi^2\)</span> in sky residuals (with threshhold of relative <span class="math notranslate nohighlight">\(\chi^2\)</span> &gt; 3)</p></td>
</tr>
</tbody>
</table>
<p>When low numbered bits (&lt;16) are set,
those will be set for half of the spectra:
either the blue or red spectrograph.
The higher-numbered bits (&gt;=16) are set for individual pixels.</p>
<p>Which mask bits are important?
The conditions that are considered very bad are already
used to set the errors to infinity for the effected pixels
(specifically, the inverse variance is set to zero).
The most useful mask bit to look at is BRIGHTSKY,
which indicates when the sky is so bright relative to the
object that perhaps one shouldn’t trust any of the object flux there.
Our reported errors are meant to include sky-subtraction errors,
but there are instances (particularly around 5577) where these
errors may be untrustworthy.</p>
<p>Dispersion and sky: The dispersion per pixel and the sky flux
are computed at each pixel by re-weighting the individual spectra
at each pixel according to their formal errors.
This re-weighting is only approximate.</p>
<p>Sky wavelengths: Note that the sky lines are slightly shifted
in the reductions because we transform the velocities to the
barycenter of the solar system.
Each exposure that contributes to the co-added spectra will have
slightly different barycenter correction, so the “average sky”
contains a superposition of these slightly-offset sky lines.
These shifts keep the object spectra as-measured at the barycenter,
regardless of the time of year or the Earth’s rotation relative
to the spectroscopic targets.</p>
</section>
<section id="doodles">
<h2>Doodles<a class="headerlink" href="#doodles" title="Permalink to this headline">¶</a></h2>
<p>See <a class="reference external" href="./sdR.rst">sdR</a></p>
<p>Superscript<sup>superscript</sup></p>
<p>Subscript<sub>subscript</sub></p>
<p>Generate html with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">rst2html</span><span class="o">.</span><span class="n">py</span> <span class="o">-</span><span class="n">gdts</span> <span class="n">datamodel_test</span><span class="o">.</span><span class="n">rst</span> <span class="n">datamodel_test</span><span class="o">.</span><span class="n">html</span>
</pre></div>
</div>
<p>With docutils installed by <a class="reference external" href="http://www.macports.org">MacPorts</a>, I have to do:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">rst2html</span><span class="o">-</span><span class="mf">2.7</span><span class="o">.</span><span class="n">py</span> <span class="o">-</span><span class="n">gdts</span> <span class="n">datamodel_test</span><span class="o">.</span><span class="n">rst</span> <span class="n">datamodel_test</span><span class="o">.</span><span class="n">html</span>
</pre></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="sdR.html" class="btn btn-neutral float-left" title="sdR" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="badModel.html" class="btn btn-neutral float-right" title="badModel" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2014-2022, DESI Collaboration.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>